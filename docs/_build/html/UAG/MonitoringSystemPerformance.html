

<!DOCTYPE html>
<html class="writer-html4" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>4. Monitoring System Performance &mdash; pcp  documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="5. Performance Metrics Inference Engine" href="PerformanceMetricsInferenceEngine.html" />
    <link rel="prev" title="3. Common Conventions and Arguments" href="CommonConventionsAndArguments.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home" alt="Documentation Home"> pcp
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Guides</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="AboutUAGGuide.html">About User’s and Administrator’s Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../PG/AboutPGGuide.html">About Programmer’s Guide</a></li>
</ul>
<p class="caption"><span class="caption-text">User's and Administrator's Guide</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="IntroductionToPcp.html">1. Introduction to PCP</a></li>
<li class="toctree-l1"><a class="reference internal" href="InstallingAndConfiguringPcp.html">2. Installing and Configuring Performance Co-Pilot</a></li>
<li class="toctree-l1"><a class="reference internal" href="CommonConventionsAndArguments.html">3. Common Conventions and Arguments</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">4. Monitoring System Performance</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#the-pmstat-command">4.1. The pmstat Command</a></li>
<li class="toctree-l2"><a class="reference internal" href="#the-pmrep-command">4.2. The pmrep Command</a></li>
<li class="toctree-l2"><a class="reference internal" href="#the-pmval-command">4.3. The pmval Command</a></li>
<li class="toctree-l2"><a class="reference internal" href="#the-pminfo-command">4.4. The pminfo Command</a></li>
<li class="toctree-l2"><a class="reference internal" href="#the-pmstore-command">4.5. The pmstore Command</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="PerformanceMetricsInferenceEngine.html">5. Performance Metrics Inference Engine</a></li>
<li class="toctree-l1"><a class="reference internal" href="ArchiveLogging.html">6. Archive Logging</a></li>
<li class="toctree-l1"><a class="reference internal" href="PcpDeploymentStrategies.html">7. Performance Co-Pilot Deployment Strategies</a></li>
<li class="toctree-l1"><a class="reference internal" href="CustomizingAndExtendingPcpServices.html">8. Customizing and Extending PCP Services</a></li>
</ul>
<p class="caption"><span class="caption-text">Programmer's Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../PG/ProgrammingPcp.html">1. Programming Performance Co-Pilot</a></li>
<li class="toctree-l1"><a class="reference internal" href="../PG/WritingPMDA.html">2. Writing A PMDA</a></li>
<li class="toctree-l1"><a class="reference internal" href="../PG/PMAPI.html">3. PMAPI–The Performance Metrics API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../PG/InstrumentingApplications.html">4. Instrumenting Applications</a></li>
</ul>
<p class="caption"><span class="caption-text">REST API</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../REST_API/PMWEBAPI.html">PMWEBAPI</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">pcp</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>4. Monitoring System Performance</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/UAG/MonitoringSystemPerformance.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="monitoring-system-performance">
<span id="monitoringsystemperformance"></span><h1><a class="toc-backref" href="#id1">4. Monitoring System Performance</a><a class="headerlink" href="#monitoring-system-performance" title="Permalink to this headline">¶</a></h1>
<p>This chapter describes the performance monitoring tools available in Performance Co-Pilot (PCP). This product provides a group of commands and tools
for measuring system performance. Each tool is described completely by its own man page. The man pages are accessible through the <strong>man</strong> command.
For example, the man page for the tool <strong>pmrep</strong> is viewed by entering the following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">man</span> <span class="n">pmrep</span>
</pre></div>
</div>
<p>The following major sections are covered in this chapter:</p>
<p>Section 4.1, “<a class="reference internal" href="#the-pmstat-command">The pmstat Command</a>”, discusses <strong>pmstat</strong>, a utility that provides a periodic one-line summary of system performance.</p>
<p>Section 4.2, “<a class="reference internal" href="#the-pmrep-command">The pmrep Command</a>”, discusses <strong>pmrep</strong>, a utility that shows the current values for named performance metrics.</p>
<p>Section 4.3, “<a class="reference internal" href="#the-pmval-command">The pmval Command</a>”, describes <strong>pmval</strong>, a utility that displays performance metrics in a textual format.</p>
<p>Section 4.4, “<a class="reference internal" href="#the-pminfo-command">The pminfo Command</a>”, describes <strong>pminfo</strong>, a utility that displays information about performance metrics.</p>
<p>Section 4.5, “<a class="reference internal" href="#the-pmstore-command">The pmstore Command</a>”, describes the use of the <strong>pmstore</strong> utility to arbitrarily set or reset selected performance metric values.</p>
<p>The following sections describe the various graphical and text-based PCP tools used to monitor local or remote system performance.</p>
<div class="contents topic" id="contents">
<p class="topic-title">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#monitoring-system-performance" id="id1">Monitoring System Performance</a><ul>
<li><a class="reference internal" href="#the-pmstat-command" id="id2">The pmstat Command</a></li>
<li><a class="reference internal" href="#the-pmrep-command" id="id3">The pmrep Command</a></li>
<li><a class="reference internal" href="#the-pmval-command" id="id4">The pmval Command</a></li>
<li><a class="reference internal" href="#the-pminfo-command" id="id5">The pminfo Command</a></li>
<li><a class="reference internal" href="#the-pmstore-command" id="id6">The pmstore Command</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="the-pmstat-command">
<h2><a class="toc-backref" href="#id2">4.1. The pmstat Command</a><a class="headerlink" href="#the-pmstat-command" title="Permalink to this headline">¶</a></h2>
<p>The <strong>pmstat</strong> command provides a periodic, one-line summary of system performance. This command is intended to monitor system performance at the highest
level, after which other tools may be used for examining subsystems to observe potential performance problems in greater detail. After entering the
<strong>pmstat</strong> command, you see output similar to the following, with successive lines appearing periodically:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>pmstat
@ Thu Aug 15 09:25:56 2017
 loadavg                      memory      swap        io    system         cpu
   1 min   swpd   free   buff  cache   pi   po   bi   bo   in   cs  us  sy  id
    1.29 833960  5614m 144744 265824    0    0    0 1664  13K  23K   6   7  81
    1.51 833956  5607m 144744 265712    0    0    0 1664  13K  24K   5   7  83
    1.55 833956  5595m 145196 271908    0    0  14K 1056  13K  24K   7   7  74
</pre></div>
</div>
<p>An additional line of output is added every five seconds. The <strong>-t</strong> <em>interval</em> option may be used to vary the update interval (i.e. the sampling interval).</p>
<p>The output from <strong>pmstat</strong> is directed to standard output, and the columns in the report are interpreted as follows:</p>
<p><strong>loadavg</strong></p>
<p>The 1-minute load average (runnable processes).</p>
<p><strong>memory</strong></p>
<p>The swpd column indicates average swap space used during the interval (all columns reported in Kbytes unless otherwise indicated). The <strong>free</strong>
column indicates average free memory during the interval. The <strong>buff</strong> column indicates average buffer memory in use during the interval. The <strong>cache</strong>
column indicates average cached memory in use during the interval.</p>
<p><strong>swap</strong></p>
<p>Reports the average number of pages that are paged-in (<strong>pi</strong>) and paged-out (<strong>po</strong>) per second during the interval. It is normal for the paged-in values
to be non-zero, but the system is suffering memory stress if the paged-out values are non-zero over an extended period.</p>
<p><strong>io</strong></p>
<p>The <strong>bi</strong> and <strong>bo</strong> columns indicate the average rate per second of block input and block output operations respectfully, during the interval.
These rates are independent of the I/O block size. If the values become large, they are reported as thousands of operations per second (K suffix)
or millions of operations per second (M suffix).</p>
<p><strong>system</strong></p>
<p>Context switch rate (<strong>cs</strong>) and interrupt rate (<strong>in</strong>). Rates are expressed as average operations per second during the interval. Note that the
interrupt rate is normally at least HZ (the clock interrupt rate, and <strong>kernel.all.hz</strong> metric) interrupts per second.</p>
<p><strong>cpu</strong></p>
<p>Percentage of CPU time spent executing user code (<strong>us</strong>), system and interrupt code (<strong>sy</strong>), idle loop (<strong>id</strong>).</p>
<p>As with most PCP utilities, real-time metric, and archive logs are interchangeable.</p>
<p>For example, the following command uses a local system PCP archive log <em>20170731</em> and the timezone of the host (<strong>smash</strong>) from which performance metrics
in the archive were collected:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>pmstat -a ${PCP_LOG_DIR}/pmlogger/smash/20170731 -t 2hour -A 1hour -z
Note: timezone set to local timezone of host &quot;smash&quot;
@ Wed Jul 31 10:00:00 2017
 loadavg                      memory      swap        io    system         cpu
   1 min   swpd   free   buff  cache   pi   po   bi   bo   in   cs  us  sy  id
    3.90  24648  6234m 239176  2913m    ?    ?    ?    ?    ?    ?   ?   ?   ?
    1.72  24648  5273m 239320  2921m    0    0    4   86  11K  19K   5   5  84
    3.12  24648  5194m 241428  2969m    0    0    0   84  10K  19K   5   5  85
    1.97  24644  4945m 244004  3146m    0    0    0   84  10K  19K   5   5  84
    3.82  24640  4908m 244116  3147m    0    0    0   83  10K  18K   5   5  85
    3.38  24620  4860m 244116  3148m    0    0    0   83  10K  18K   5   4  85
    2.89  24600  4804m 244120  3149m    0    0    0   83  10K  18K   5   4  85
pmFetch: End of PCP archive log
</pre></div>
</div>
<p>For complete information on <strong>pmstat</strong> usage and command line options, see the <strong>pmstat(1)</strong> man page.</p>
</div>
<div class="section" id="the-pmrep-command">
<h2><a class="toc-backref" href="#id3">4.2. The pmrep Command</a><a class="headerlink" href="#the-pmrep-command" title="Permalink to this headline">¶</a></h2>
<p>The <strong>pmrep</strong> command displays performance metrics in ASCII tables, suitable for export into databases or report generators. It is a flexible command.
For example, the following command provides continuous memory statistics on a host named <strong>surf</strong>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>pmrep -p -h surf kernel.all.load kernel.all.pswitch
          k.a.load  k.a.load  k.a.load  k.a.pswitch
          1 minute  5 minute  15 minut
                                           count/s
10:41:37     0.160     0.170     0.180          N/A
10:41:38     0.160     0.170     0.180     1427.016
10:41:39     0.160     0.170     0.180     2129.040
10:41:40     0.160     0.170     0.180     5335.163
10:41:41     0.160     0.170     0.180      723.125
10:41:42     0.140     0.160     0.180      591.859
</pre></div>
</div>
<p>See the <strong>pmrep(1)</strong> man page for more information.</p>
</div>
<div class="section" id="the-pmval-command">
<h2><a class="toc-backref" href="#id4">4.3. The pmval Command</a><a class="headerlink" href="#the-pmval-command" title="Permalink to this headline">¶</a></h2>
<p>The <strong>pmval</strong> command dumps the current values for the named performance metrics. For example, the following command reports the value of performance
metric <strong>proc.nprocs</strong> once per second (by default), and produces output similar to this:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>pmval proc.nprocs
metric:    proc.nprocs
host:      localhost
semantics: instantaneous value
units:     none
samples:   all
interval:  1.00 sec
         81
         81
         82
         81
</pre></div>
</div>
<p>In this example, the number of running processes was reported once per second.</p>
<p>Where the semantics of the underlying performance metrics indicate that it would be sensible, <strong>pmval</strong> reports the rate of change or resource utilization.</p>
<p>For example, the following command reports idle processor utilization for each of four CPUs on the remote host <strong>dove</strong>, each five seconds apart,
producing output of this form:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>pmval -h dove -t 5sec -s 4 kernel.percpu.cpu.idle
metric:    kernel.percpu.cpu.idle
host:      dove
semantics: cumulative counter (converting to rate)
units:     millisec (converting to time utilization)
samples:   4
interval:  5.00 sec

cpu:1.1.0.a cpu:1.1.0.c cpu:1.1.1.a cpu:1.1.1.c
     1.000       0.9998      0.9998      1.000
     1.000       0.9998      0.9998      1.000
     0.8989      0.9987      0.9997      0.9995
     0.9568      0.9998      0.9996      1.000
</pre></div>
</div>
<p>Similarly, the following command reports disk I/O read rate every minute for just the disk <strong>/dev/disk1</strong>, and produces output similar to the following:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>pmval -t 1min -i disk1 disk.dev.read
metric:    disk.dev.read
host:      localhost
semantics: cumulative counter (converting to rate)
units:     count (converting to count / sec)
samples:   indefinite
interval:  60.00 sec
        disk1
         33.67
         48.71
         52.33
         11.33
         2.333
</pre></div>
</div>
<p>The <strong>-r</strong> flag may be used to suppress the rate calculation (for metrics with counter semantics) and display the raw values of the metrics.</p>
<p>In the example below, manipulation of the time within the archive is achieved by the exchange of time control messages between <strong>pmval</strong> and <strong>pmtime</strong>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>pmval -g -a ${PCP_LOG_DIR}/pmlogger/myserver/20170731 kernel.all.load
</pre></div>
</div>
<p>The <strong>pmval</strong> command is documented by the <strong>pmval(1)</strong> man page, and annotated examples of the use of <strong>pmval</strong> can be found in the <em>PCP Tutorials and Case Studies</em>
companion document.</p>
</div>
<div class="section" id="the-pminfo-command">
<h2><a class="toc-backref" href="#id5">4.4. The pminfo Command</a><a class="headerlink" href="#the-pminfo-command" title="Permalink to this headline">¶</a></h2>
<p>The <strong>pminfo</strong> command displays various types of information about performance metrics available through the Performance Co-Pilot (PCP) facilities.</p>
<p>The <strong>-T</strong> option is extremely useful; it provides help text about performance metrics:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>pminfo -T mem.util.cached
mem.util.cached
Help:
Memory used by the page cache, including buffered file data.
This is in-memory cache for files read from the disk (the pagecache)
but doesn&#39;t include SwapCached.
</pre></div>
</div>
<p>The <strong>-t</strong> option displays the one-line help text associated with the selected metrics. The <strong>-T</strong> option prints more verbose help text.</p>
<p>Without any options, <strong>pminfo</strong> verifies that the specified metrics exist in the namespace, and echoes those names. Metrics may be specified as arguments
to <strong>pminfo</strong> using their full metric names. For example, this command returns the following response:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pminfo</span> <span class="n">hinv</span><span class="o">.</span><span class="n">ncpu</span> <span class="n">network</span><span class="o">.</span><span class="n">interface</span><span class="o">.</span><span class="n">total</span><span class="o">.</span><span class="n">bytes</span>
<span class="n">hinv</span><span class="o">.</span><span class="n">ncpu</span>
<span class="n">network</span><span class="o">.</span><span class="n">interface</span><span class="o">.</span><span class="n">total</span><span class="o">.</span><span class="n">bytes</span>
</pre></div>
</div>
<p>A group of related metrics in the namespace may also be specified. For example, to list all of the <strong>hinv</strong> metrics you would use this command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pminfo</span> <span class="n">hinv</span>
<span class="n">hinv</span><span class="o">.</span><span class="n">physmem</span>
<span class="n">hinv</span><span class="o">.</span><span class="n">pagesize</span>
<span class="n">hinv</span><span class="o">.</span><span class="n">ncpu</span>
<span class="n">hinv</span><span class="o">.</span><span class="n">ndisk</span>
<span class="n">hinv</span><span class="o">.</span><span class="n">nfilesys</span>
<span class="n">hinv</span><span class="o">.</span><span class="n">ninterface</span>
<span class="n">hinv</span><span class="o">.</span><span class="n">nnode</span>
<span class="n">hinv</span><span class="o">.</span><span class="n">machine</span>
<span class="n">hinv</span><span class="o">.</span><span class="n">map</span><span class="o">.</span><span class="n">scsi</span>
<span class="n">hinv</span><span class="o">.</span><span class="n">map</span><span class="o">.</span><span class="n">cpu_num</span>
<span class="n">hinv</span><span class="o">.</span><span class="n">map</span><span class="o">.</span><span class="n">cpu_node</span>
<span class="n">hinv</span><span class="o">.</span><span class="n">map</span><span class="o">.</span><span class="n">lvname</span>
<span class="n">hinv</span><span class="o">.</span><span class="n">cpu</span><span class="o">.</span><span class="n">clock</span>
<span class="n">hinv</span><span class="o">.</span><span class="n">cpu</span><span class="o">.</span><span class="n">vendor</span>
<span class="n">hinv</span><span class="o">.</span><span class="n">cpu</span><span class="o">.</span><span class="n">model</span>
<span class="n">hinv</span><span class="o">.</span><span class="n">cpu</span><span class="o">.</span><span class="n">stepping</span>
<span class="n">hinv</span><span class="o">.</span><span class="n">cpu</span><span class="o">.</span><span class="n">cache</span>
<span class="n">hinv</span><span class="o">.</span><span class="n">cpu</span><span class="o">.</span><span class="n">bogomips</span>
</pre></div>
</div>
<p>If no metrics are specified, <strong>pminfo</strong> displays the entire collection of metrics. This can be useful for searching for metrics, when only part of the
full name is known. For example, this command returns the following response:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pminfo</span> <span class="o">|</span> <span class="n">grep</span> <span class="n">nfs</span>
<span class="n">nfs</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">calls</span>
<span class="n">nfs</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">reqs</span>
<span class="n">nfs</span><span class="o">.</span><span class="n">server</span><span class="o">.</span><span class="n">calls</span>
<span class="n">nfs</span><span class="o">.</span><span class="n">server</span><span class="o">.</span><span class="n">reqs</span>
<span class="n">nfs3</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">calls</span>
<span class="n">nfs3</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">reqs</span>
<span class="n">nfs3</span><span class="o">.</span><span class="n">server</span><span class="o">.</span><span class="n">calls</span>
<span class="n">nfs3</span><span class="o">.</span><span class="n">server</span><span class="o">.</span><span class="n">reqs</span>
<span class="n">nfs4</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">calls</span>
<span class="n">nfs4</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">reqs</span>
<span class="n">nfs4</span><span class="o">.</span><span class="n">server</span><span class="o">.</span><span class="n">calls</span>
<span class="n">nfs4</span><span class="o">.</span><span class="n">server</span><span class="o">.</span><span class="n">reqs</span>
</pre></div>
</div>
<p>The <strong>-d</strong> option causes <strong>pminfo</strong> to display descriptive information about metrics (refer to the <strong>pmLookupDesc(3)</strong> man page for an explanation of this metadata information).
The following command and response show use of the <strong>-d</strong> option:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>pminfo -d proc.nprocs disk.dev.read filesys.free
proc.nprocs
    Data Type: 32-bit unsigned int  InDom: PM_INDOM_NULL 0xffffffff
    Semantics: instant  Units: none

disk.dev.read
    Data Type: 32-bit unsigned int  InDom: 60.1 0xf000001
    Semantics: counter  Units: count

filesys.free
    Data Type: 64-bit unsigned int  InDom: 60.5 0xf000005
    Semantics: instant  Units: Kbyte
</pre></div>
</div>
<p>The <strong>-l</strong> option causes <strong>pminfo</strong> to display labels about metrics (refer to the <strong>pmLookupLabels(3)</strong> man page for an explanation of this metadata
information). If the metric has an instance domain, the labels associated with each instance of the metric is printed. The following command and
response show use of the <strong>-l</strong> option:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>pminfo -l -h shard kernel.pernode.cpu.user
kernel.percpu.cpu.sys
    inst [0 or &quot;cpu0&quot;] labels
{&quot;agent&quot;:&quot;linux&quot;,&quot;cpu&quot;:0,&quot;device_type&quot;:&quot;cpu&quot;,&quot;domainname&quot;:&quot;acme.com&quot;,&quot;groupid&quot;:1000,&quot;hostname&quot;:&quot;shard&quot;,&quot;indom_name&quot;:&quot;per cpu&quot;,&quot;userid&quot;:1000}
    inst [1 or &quot;cpu1&quot;] labels
{&quot;agent&quot;:&quot;linux&quot;,&quot;cpu&quot;:1,&quot;device_type&quot;:&quot;cpu&quot;,&quot;domainname&quot;:&quot;acme.com&quot;,&quot;groupid&quot;:1000,&quot;hostname&quot;:&quot;shard&quot;,&quot;indom_name&quot;:&quot;per cpu&quot;,&quot;userid&quot;:1000}
    inst [2 or &quot;cpu2&quot;] labels
{&quot;agent&quot;:&quot;linux&quot;,&quot;cpu&quot;:2,&quot;device_type&quot;:&quot;cpu&quot;,&quot;domainname&quot;:&quot;acme.com&quot;,&quot;groupid&quot;:1000,&quot;hostname&quot;:&quot;shard&quot;,&quot;indom_name&quot;:&quot;per cpu&quot;,&quot;userid&quot;:1000}
    inst [3 or &quot;cpu3&quot;] labels
{&quot;agent&quot;:&quot;linux&quot;,&quot;cpu&quot;:3,&quot;device_type&quot;:&quot;cpu&quot;,&quot;domainname&quot;:&quot;acme.com&quot;,&quot;groupid&quot;:1000,&quot;hostname&quot;:&quot;shard&quot;,&quot;indom_name&quot;:&quot;per cpu&quot;,&quot;userid&quot;:1000}
    inst [4 or &quot;cpu4&quot;] labels
{&quot;agent&quot;:&quot;linux&quot;,&quot;cpu&quot;:4,&quot;device_type&quot;:&quot;cpu&quot;,&quot;domainname&quot;:&quot;acme.com&quot;,&quot;groupid&quot;:1000,&quot;hostname&quot;:&quot;shard&quot;,&quot;indom_name&quot;:&quot;per cpu&quot;,&quot;userid&quot;:1000}
    inst [5 or &quot;cpu5&quot;] labels
{&quot;agent&quot;:&quot;linux&quot;,&quot;cpu&quot;:5,&quot;device_type&quot;:&quot;cpu&quot;,&quot;domainname&quot;:&quot;acme.com&quot;,&quot;groupid&quot;:1000,&quot;hostname&quot;:&quot;shard&quot;,&quot;indom_name&quot;:&quot;per cpu&quot;,&quot;userid&quot;:1000}
    inst [6 or &quot;cpu6&quot;] labels
{&quot;agent&quot;:&quot;linux&quot;,&quot;cpu&quot;:6,&quot;device_type&quot;:&quot;cpu&quot;,&quot;domainname&quot;:&quot;acme.com&quot;,&quot;groupid&quot;:1000,&quot;hostname&quot;:&quot;shard&quot;,&quot;indom_name&quot;:&quot;per cpu&quot;,&quot;userid&quot;:1000}
    inst [7 or &quot;cpu7&quot;] labels
{&quot;agent&quot;:&quot;linux&quot;,&quot;cpu&quot;:7,&quot;device_type&quot;:&quot;cpu&quot;,&quot;domainname&quot;:&quot;acme.com&quot;,&quot;groupid&quot;:1000,&quot;hostname&quot;:&quot;shard&quot;,&quot;indom_name&quot;:&quot;per cpu&quot;,&quot;userid&quot;:1000}
</pre></div>
</div>
<p>The <strong>-f</strong> option to <strong>pminfo</strong> forces the current value of each named metric to be fetched and printed. In the example below, all metrics in the group <strong>hinv</strong>
are selected:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>pminfo -f hinv
hinv.physmem
    value 15701

hinv.pagesize
    value 16384

hinv.ncpu
    value 4

hinv.ndisk
    value 6

hinv.nfilesys
    value 2

hinv.ninterface
    value 8

hinv.nnode
    value 2

hinv.machine
    value &quot;IP35&quot;

hinv.map.cpu_num
    inst [0 or &quot;cpu:1.1.0.a&quot;] value 0
    inst [1 or &quot;cpu:1.1.0.c&quot;] value 1
    inst [2 or &quot;cpu:1.1.1.a&quot;] value 2
    inst [3 or &quot;cpu:1.1.1.c&quot;] value 3

hinv.map.cpu_node
    inst [0 or &quot;node:1.1.0&quot;] value &quot;/dev/hw/module/001c01/slab/0/node&quot;
    inst [1 or &quot;node:1.1.1&quot;] value &quot;/dev/hw/module/001c01/slab/1/node&quot;

hinv.cpu.clock
    inst [0 or &quot;cpu:1.1.0.a&quot;] value 800
    inst [1 or &quot;cpu:1.1.0.c&quot;] value 800
    inst [2 or &quot;cpu:1.1.1.a&quot;] value 800
    inst [3 or &quot;cpu:1.1.1.c&quot;] value 800

hinv.cpu.vendor
    inst [0 or &quot;cpu:1.1.0.a&quot;] value &quot;GenuineIntel&quot;
    inst [1 or &quot;cpu:1.1.0.c&quot;] value &quot;GenuineIntel&quot;
    inst [2 or &quot;cpu:1.1.1.a&quot;] value &quot;GenuineIntel&quot;
    inst [3 or &quot;cpu:1.1.1.c&quot;] value &quot;GenuineIntel&quot;

hinv.cpu.model
    inst [0 or &quot;cpu:1.1.0.a&quot;] value &quot;0&quot;
    inst [1 or &quot;cpu:1.1.0.c&quot;] value &quot;0&quot;
    inst [2 or &quot;cpu:1.1.1.a&quot;] value &quot;0&quot;
    inst [3 or &quot;cpu:1.1.1.c&quot;] value &quot;0&quot;

hinv.cpu.stepping
    inst [0 or &quot;cpu:1.1.0.a&quot;] value &quot;6&quot;
    inst [1 or &quot;cpu:1.1.0.c&quot;] value &quot;6&quot;
    inst [2 or &quot;cpu:1.1.1.a&quot;] value &quot;6&quot;
    inst [3 or &quot;cpu:1.1.1.c&quot;] value &quot;6&quot;

hinv.cpu.cache
    inst [0 or &quot;cpu:1.1.0.a&quot;] value 0
    inst [1 or &quot;cpu:1.1.0.c&quot;] value 0
    inst [2 or &quot;cpu:1.1.1.a&quot;] value 0
    inst [3 or &quot;cpu:1.1.1.c&quot;] value 0

hinv.cpu.bogomips
    inst [0 or &quot;cpu:1.1.0.a&quot;] value 1195.37
    inst [1 or &quot;cpu:1.1.0.c&quot;] value 1195.37
    inst [2 or &quot;cpu:1.1.1.a&quot;] value 1195.37
    inst [3 or &quot;cpu:1.1.1.c&quot;] value 1195.37
</pre></div>
</div>
<p>The <strong>-h</strong> option directs <strong>pminfo</strong> to retrieve information from the specified host. If the metric has an instance domain,
the value associated with each instance of the metric is printed:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>pminfo -h dove -f filesys.mountdir
filesys.mountdir
    inst [0 or &quot;/dev/xscsi/pci00.01.0/target81/lun0/part3&quot;] value &quot;/&quot;
    inst [1 or &quot;/dev/xscsi/pci00.01.0/target81/lun0/part1&quot;] value &quot;/boot/efi&quot;
</pre></div>
</div>
<p>The <strong>-m</strong> option prints the Performance Metric Identifiers (PMIDs) of the selected metrics. This is useful for finding out which PMDA supplies the metric.
For example, the output below identifies the PMDA supporting domain 4 (the leftmost part of the PMID) as the one supplying information for the metric
<strong>environ.extrema.mintemp</strong>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pminfo</span> <span class="o">-</span><span class="n">m</span> <span class="n">environ</span><span class="o">.</span><span class="n">extrema</span><span class="o">.</span><span class="n">mintemp</span>
<span class="n">environ</span><span class="o">.</span><span class="n">extrema</span><span class="o">.</span><span class="n">mintemp</span> <span class="n">PMID</span><span class="p">:</span> <span class="mf">4.0</span><span class="o">.</span><span class="mi">3</span>
</pre></div>
</div>
<p>The <strong>-v</strong> option verifies that metric definitions in the PMNS correspond with supported metrics, and checks that a value is available for the metric.
Descriptions and values are fetched, but not printed. Only errors are reported.</p>
<p>Complete information on the <strong>pminfo</strong> command is found in the <strong>pminfo(1)</strong> man page. There are further examples of the use of <strong>pminfo</strong> in the
<em>PCP Tutorials and Case Studies</em>.</p>
</div>
<div class="section" id="the-pmstore-command">
<h2><a class="toc-backref" href="#id6">4.5. The pmstore Command</a><a class="headerlink" href="#the-pmstore-command" title="Permalink to this headline">¶</a></h2>
<p>From time to time you may wish to change the value of a particular metric. Some metrics are counters that may need to be reset, and some are simply
control variables for agents that collect performance metrics. When you need to change the value of a metric for any reason, the command to use is <strong>pmstore</strong>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">For obvious reasons, the ability to arbitrarily change the value of a performance metric is not supported. Rather, PCP collectors selectively allow some metrics to be modified in a very controlled fashion.</p>
</div>
<p>The basic syntax of the command is as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pmstore</span> <span class="n">metricname</span> <span class="n">value</span>
</pre></div>
</div>
<p>There are also command line flags to further specify the action. For example, the <strong>-i</strong> option restricts the change to one or more instances of the
performance metric.</p>
<p>The <em>value</em> may be in one of several forms, according to the following rules:</p>
<ol class="arabic simple">
<li>If the metric has an integer type, then value should consist of an optional leading hyphen, followed either by decimal digits or “0x” and some hexadecimal digits; “0X” is also acceptable instead of “0x.”</li>
<li>If the metric has a floating point type, then value should be in the form of an integer (described above), a fixed point number, or a number in scientific notation.</li>
<li>If the metric has a string type, then value is interpreted as a literal string of ASCII characters.</li>
<li>If the metric has an aggregate type, then an attempt is made to interpret value as an integer, a floating point number, or a string. In the first two cases, the minimal word length encoding is used; for example, “123” would be interpreted as a four-byte aggregate, and “0x100000000” would be interpreted as an eight-byte aggregate.</li>
</ol>
<p>The following example illustrates the use of <strong>pmstore</strong> to enable performance metrics collection in the <strong>txmon</strong> PMDA (see <code class="docutils literal notranslate"><span class="pre">${PCP_PMDAS_DIR}/txmon</span></code>
for the source code of the txmon PMDA). When the metric <strong>txmon.control.level</strong> has the value 0, no performance metrics are collected.
Values greater than 0 enable progressively more verbose instrumentation.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>pminfo -f txmon.count
txmon.count
No value(s) available!
pmstore txmon.control.level 1
txmon.control.level old value=0 new value=1
pminfo -f txmon.count
txmon.count
       inst [0 or &quot;ord-entry&quot;] value 23
       inst [1 or &quot;ord-enq&quot;] value 11
       inst [2 or &quot;ord-ship&quot;] value 10
       inst [3 or &quot;part-recv&quot;] value 3
       inst [4 or &quot;part-enq&quot;] value 2
       inst [5 or &quot;part-used&quot;] value 1
       inst [6 or &quot;b-o-m&quot;] value 0
</pre></div>
</div>
<p>For complete information on <strong>pmstore</strong> usage and syntax, see the <strong>pmstore(1)</strong> man page.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="PerformanceMetricsInferenceEngine.html" class="btn btn-neutral float-right" title="5. Performance Metrics Inference Engine" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="CommonConventionsAndArguments.html" class="btn btn-neutral float-left" title="3. Common Conventions and Arguments" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, Performance Co-Pilot

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>